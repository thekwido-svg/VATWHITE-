<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }
        #stage { height: 160px; position: relative; border-bottom: 1px solid #222; }
        #multiplier { position: absolute; top: 25%; width: 100%; text-align: center; font-size: 3.5rem; font-weight: 900; }
        .tab-bar { display: flex; background: #111; }
        .tab { flex: 1; padding: 12px; text-align: center; font-size: 0.8rem; font-weight: bold; }
        .tab.active { color: gold; border-bottom: 2px solid gold; }
        .content { flex: 1; display: none; padding: 10px; overflow-y: auto; }
        .content.active { display: block; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 5px; font-weight: bold; }
        .btn-bet { background: #28a745; color: white; }
        .btn-out { background: #ffc107; color: black; display: none; }
        #auth-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; display: flex; flex-direction: column; justify-content: center; align-items: center; }
    </style>
</head>
<body>
    <div id="auth-screen">
        <h2 style="color:gold;">VATWHITE REGISTER</h2>
        <div style="width:80%; background:#111; padding:20px; border-radius:10px;">
            <input type="number" id="reg-phone" placeholder="Namba ya Simu" style="width:100%; margin-bottom:10px; padding:10px;">
            <input type="password" id="reg-pass" placeholder="Password" style="width:100%; margin-bottom:10px; padding:10px;">
            <button class="btn btn-bet" onclick="handleRegister()">JISAJILI</button>
        </div>
    </div>

    <div style="display:flex; justify-content:space-between; padding:10px;">
        <span style="color:gold;">VATWHITE</span>
        <span style="color:#28a745;"><span id="bal">0.00</span> KES</span>
    </div>

    <div id="stage">
        <div id="multiplier">1.00x</div>
        <div id="rocket-wrap" style="position:absolute; bottom:10%; left:5%; font-size:40px;">ðŸš€</div>
    </div>

    <div class="tab-bar">
        <div class="tab active" onclick="show('bet', this)">BETTING</div>
        <div class="tab" onclick="show('chat', this)">LIVE CHAT</div>
        <div class="tab" onclick="show('menu', this)">MENU</div>
    </div>

    <div id="bet" class="content active">
        <div style="background:#121212; padding:10px; border-radius:8px; margin-bottom:10px;">
            <input type="number" id="amt1" value="5" style="width:45%; padding:10px;"> 
            <input type="number" id="auto1" placeholder="Auto" style="width:45%; padding:10px;">
            <button id="btn1" class="btn btn-bet" onclick="placeBet(1)">BET</button>
            <button id="out1" class="btn btn-out" onclick="cash(1)">CASH OUT KES 0.00</button>
            <label><input type="checkbox" id="abt1"> Auto Bet</label>
        </div>
        <div style="background:#121212; padding:10px; border-radius:8px;">
            <input type="number" id="amt2" value="10" style="width:45%; padding:10px;"> 
            <input type="number" id="auto2" placeholder="Auto" style="width:45%; padding:10px;">
            <button id="btn2" class="btn btn-bet" onclick="placeBet(2)">BET</button>
            <button id="out2" class="btn btn-out" onclick="cash(2)">CASH OUT KES 0.00</button>
            <label><input type="checkbox" id="abt2"> Auto Bet</label>
        </div>
    </div>

    <div id="chat" class="content">... Live Chat Iko Hapa ...</div>
    <div id="menu" class="content">
        <button class="btn" style="background:#ffc107; margin-bottom:10px;" onclick="alert('Lipa 0702170114')">DEPOSIT</button>
        <button class="btn" style="background:#ff0000;" onclick="withdraw()">WITHDRAW</button>
    </div>

    <script>
        const socket = io();
        let currentM = 1.0, activeBets = { 1: false, 2: false };

        socket.on('tick', (m) => {
            currentM = parseFloat(m);
            document.getElementById('multiplier').innerText = m + "x"; // Odis zinahesabika live hapa!
            
            [1, 2].forEach(id => {
                if(activeBets[id]) {
                    let win = (document.getElementById('amt' + id).value * currentM).toFixed(2);
                    document.getElementById('out' + id).innerText = "CASH OUT KES " + win; // Onyesha pesa live
                }
            });
        });

        function placeBet(id) {
            if(parseFloat(document.getElementById('bal').innerText) <= 0) return alert("Salio ni 0.00. Deposit kwanza!");
            activeBets[id] = true;
            document.getElementById('btn' + id).style.display = 'none';
            document.getElementById('out' + id).style.display = 'block';
        }

        function cash(id) {
            activeBets[id] = false;
            alert("Umeshinda!");
            document.getElementById('btn' + id).style.display = 'block';
            document.getElementById('out' + id).style.display = 'none';
        }

        function show(id, el) {
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active');
        }

        async function handleRegister() {
            const phone = document.getElementById('reg-phone').value;
            if(!phone) return alert("Weka namba!");
            localStorage.setItem('vatPhone', phone);
            document.getElementById('auth-screen').style.display = 'none';
        }

        window.onload = () => { if(localStorage.getItem('vatPhone')) document.getElementById('auth-screen').style.display = 'none'; }
    </script>
</body>
</html>
          
